<template>
<div class="page" id="gameSettingsPage">
	<hat-header @go-back="$router.go(-1)"></hat-header>
	<div class="content-small">
		<div id="gameSettingsPage_header">
			<h1 id="gameSettingsPage_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h1>
			<h2
				v-if="!$store.getters.isHost"
				id="gameSettingsPage_subtitle">
					–¢—ã –±–æ–ª—å—à–µ –Ω–µ —Ö–æ—Å—Ç. –¢–æ–ª—å–∫–æ —Ö–æ—Å—Ç –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
			</h2>
		</div>
		<div id="gameSettingsPage_body">
			<div id="gameSettingsPage_layers">
				<div class="layer">
					<div class="label">
						–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –≤ —à–ª—è–ø–µ
						<span class="fa fa-info-circle info" id="gameSettingsPage_wordNumberInfo">
							<div class="arrow"></div>
						</span>
						<div class="popup-hint">
							–ö–æ–≥–¥–∞ —Å–ª–æ–≤–∞ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è, –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –∏ –∏–≥—Ä–∞.
						</div>
					</div>

						<!-- :value="settings.wordNumber"
						@input="validateNumber" -->
					<input
						v-model="settings.wordNumber"
						class="small-underlined-input input"
						id="gameSettingsPage_wordNumberField">
				</div>
				<div class="layer" id="gameSettingsPage_delayTime">
					<div class="label">
						–í—Ä–µ–º—è –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É
						<span class="fa fa-info-circle info" id="gameSettingsPage_delayTimeInfo">
							<div class="arrow"></div>
						</span>
						<div class="popup-hint">
							–í—Ä–µ–º—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ –¥–æ –Ω–∞—á–∞–ª–∞ —Ä–∞—É–Ω–¥–∞.
						</div>
					</div>
					<input
						v-model.number="settings.delayTime"
						class="small-underlined-input input"
						id="gameSettingsPage_delayTimeField">
				</div>
				<div class="layer" id="gameSettingsPage_explanationTime">
					<div class="label">
						–í—Ä–µ–º—è –Ω–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
						<span class="fa fa-info-circle info" id="gameSettingsPage_explanationTimeInfo">
							<div class="arrow"></div>
						</span>
						<div class="popup-hint">
							–ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ª—é–±–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–ª–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–∫–æ–Ω—á–µ–Ω–æ.
						</div>
					</div>
					<input class="small-underlined-input input" id="gameSettingsPage_explanationTimeField"  name="type.number">
				</div>
				<div class="layer" id="gameSettingsPage_aftermathTime">
					<div class="label">
						–í—Ä–µ–º—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –ø–æ–ø—ã—Ç–∫—É
						<span class="fa fa-info-circle info" id="gameSettingsPage_aftermathTimeInfo">
							<div class="arrow"></div>
						</span>
						<div class="popup-hint">
							–í —Ç–µ—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≥–∞–¥—ã–≤–∞—é—â–∏–π –º–æ–∂–µ—Ç –æ–∑–≤—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é.
						</div>
					</div>
					<input class="small-underlined-input input" id="gameSettingsPage_aftermathTimeField"  name="type.number">
				</div>
				<div class="layer" id="gameSettingsPage_dictionarySelection">
					<div class="label" id="gameSettingsPage_dictionarySelectionLabel">
						–°–ª–æ–≤–∞—Ä—å
						<span class="fa fa-info-circle info" id="gameSettingsPage_dictionarySelectionInfo">
							<div class="arrow"></div>
						</span>
						<div class="popup-hint">
							–°–ª–æ–≤–∞—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–±–æ—Ä —Å–ª–æ–≤, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç –≤—ã–±—Ä–∞–Ω—ã —Å–ª–æ–≤–∞ –¥–ª—è —ç—Ç–æ–π –ø–∞—Ä—Ç–∏–∏.
						</div>
					</div>
					<select class="medium-select" id="gameSettingsPage_dictionaryList">
						<option>–†—É—Å—Å–∫–∏–π (20000 —Å–ª–æ–≤)</option>
						<option>English (10000 words)</option>
					</select>
				</div>
				<div class="layer" id="gameSettingsPage_strictMode">
					<input type="checkbox" id="gameSettingsPage_strictModeCheckbox">
					<label for="gameSettingsPage_strictModeCheckbox"><span class="fa fa-check"></span></label>
					<label>
						–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º
						<span class="fa fa-info-circle info" id="gameSettingsPage_strictModeInfo">
							<div class="arrow"></div>
						</span>
						<div class="popup-hint">
							–†–µ–∂–∏–º –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —à–ª—è–ø–Ω–∏–∫–æ–≤ üòä. –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≤—Å–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞—É–Ω–¥ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è, –∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–ª–æ–≤–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ—É–≥–∞–¥–∞–Ω–Ω—ã–º.
						</div>
					</label>
				</div>
			</div>
			<div id="gameSettingsPage_actions">
				<button class="medium-button bg-green" id="gameSettingsPage_applyButton">
					–ü—Ä–∏–º–µ–Ω–∏—Ç—å
				</button><button class="medium-button bg-blue" id="gameSettingsPage_revertButton">
					–û—Ç–º–µ–Ω–∞
				</button>
			</div>
		</div>
	</div>
</div>
</template>

<script>
import hatHeader from "_/hatHeader.vue"

export default {
	data: function() {
		return {
			settings: this.$store.state.room.settings
		}
	},
	methods: {
		// validateNumber: function(e) {
		// 	let el = e.target;
		// 	console.log(el);
		// 	let caretPosition = el.selectionStart;
		// 	let newCaretPosition = el.value.slice(0, caretPosition).replace(/\D+/g,"").length;
		// 	el.value = el.value.replace(/\D+/g,"");
		// 	el.selectionStart = newCaretPosition;
		// 	el.selectionEnd = newCaretPosition;
		// 	console.log(el.value, newCaretPosition, caretPosition, el.value.slice(0, caretPosition));
		// }
	},
	components: {hatHeader},
	beforeRouteEnter: function(to, from, next) {
		next(vm => {
			if (vm.$store.state.room.connection != "online") {
				vm.$router.replace({path: "/join", query: {k: vm.$store.state.room.key, ...vm.$route.query}});
			} else {
				if (vm.$route.query.k != vm.$store.state.room.key) {
					vm.$router.replace({query: {k: vm.$store.state.room.key}})
				}
			}
		})
	},
}
</script>
